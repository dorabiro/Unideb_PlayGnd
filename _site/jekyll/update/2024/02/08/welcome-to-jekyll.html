<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Sallen-Key Filter | UnidebPlayGnd</title>
<meta name="generator" content="Jekyll v3.9.4" />
<meta property="og:title" content="Sallen-Key Filter" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="In this post you can read about a special case of the general Sallen-Key topology, where equal resistor and capacitor values were used: R1 = R2 = R and C1 = C2 = C. In the following you can find the tools, results, and methods which I used." />
<meta property="og:description" content="In this post you can read about a special case of the general Sallen-Key topology, where equal resistor and capacitor values were used: R1 = R2 = R and C1 = C2 = C. In the following you can find the tools, results, and methods which I used." />
<link rel="canonical" href="http://localhost:4000/unideb.playgnd/jekyll/update/2024/02/08/welcome-to-jekyll.html" />
<meta property="og:url" content="http://localhost:4000/unideb.playgnd/jekyll/update/2024/02/08/welcome-to-jekyll.html" />
<meta property="og:site_name" content="UnidebPlayGnd" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-02-08T17:28:23+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Sallen-Key Filter" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-02-08T17:28:23+01:00","datePublished":"2024-02-08T17:28:23+01:00","description":"In this post you can read about a special case of the general Sallen-Key topology, where equal resistor and capacitor values were used: R1 = R2 = R and C1 = C2 = C. In the following you can find the tools, results, and methods which I used.","headline":"Sallen-Key Filter","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/unideb.playgnd/jekyll/update/2024/02/08/welcome-to-jekyll.html"},"url":"http://localhost:4000/unideb.playgnd/jekyll/update/2024/02/08/welcome-to-jekyll.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/unideb.playgnd/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/unideb.playgnd/feed.xml" title="UnidebPlayGnd" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/unideb.playgnd/">UnidebPlayGnd</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/unideb.playgnd/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

    <header class="post-header">
        <h1 class="post-title p-name" itemprop="name headline">Sallen-Key Filter</h1>
        <p class="post-meta">
            <time class="dt-published" datetime="2024-02-08T17:28:23+01:00" itemprop="datePublished">Feb 8, 2024
            </time></p>
    </header>

    <div class="post-content e-content" itemprop="articleBody">
        <p>In this post you can read about a special case of the general <a href="https://en.wikipedia.org/wiki Sallen%E2%80%93Key_topology">Sallen-Key</a> topology, where equal resistor and capacitor values were used:  <code class="language-plaintext highlighter-rouge">R1 = R2 = R</code> and <code class="language-plaintext highlighter-rouge">C1 = C2 = C</code>. In the following you can find the tools, results, and methods which I used.</p>

<p><strong>Used instruments:</strong></p>

<ul>
  <li>Oscilloscope RIGOL DS1074 Z+</li>
  <li>Function generator RIGOL DG1032Z</li>
  <li>Power supply GWInstek GPD3303S</li>
</ul>

<p><strong>Used components:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>U1 = LM358
U2 = OP482
R1 = R2 = R4 = R5 = 10kΩ
R3 = 1kΩ
C1 = C2 = 10nF
C3 = C4 = 47uF
</code></pre></div></div>

<p><strong>Measurement parameters:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Frequency range: 10 Hz - 10 kHz
Signal waveform: sinusoidal
Output signal level: 5 Vpp
IC supply voltage: ±12 V
</code></pre></div></div>

<p><strong>Used software and packages:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>KiCAD
LTSpice
SciLab
Python PyVISA-Py"
</code></pre></div></div>

<p><img src="/unideb.playgnd/images/breadboard.png" alt="Picture not found" /></p>
<p align="center" style="font-size: 18px;">
Circuit on breadboard</p>

<p><strong>System Identification</strong></p>

<p>To understand the selected system, it is necessary to determine the mathematical relationship among its characteristics, the equations governing these characteristics, and the coefficients within them. Overall, during the completion of the task, structural and parameter identification was conducted.</p>

<p>${V_x - V_i \over R1} + {V_x - V_y \over R2} + {V_x - V_o \over ZC1} = 0$</p>

<p>$ZC1 = {1 \over SC1}$</p>

<p>$V_y = V_x * {ZC2 \over ZC2 + R2 }$</p>

<p>$V_y = V_o * {R3 \over R3 + R4 }$</p>

<div class="code-header">
    <button class="copy-code-button">
      Copy code to clipboard
    </button>

</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">FREQ_STEPS</span><span class="p">):</span>
    <span class="c1"># Reset oscilloscope statistics
</span>    <span class="n">scope</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="s">':MEASure:STATistic:RESet'</span><span class="p">)</span>
    <span class="c1"># Calculating the frequency step
</span>    <span class="n">output_Freq</span> <span class="o">=</span> <span class="mi">10</span><span class="o">**</span><span class="p">(((</span><span class="n">math</span><span class="p">.</span><span class="n">log10</span><span class="p">(</span><span class="n">STOP_FREQ</span><span class="p">)</span><span class="o">-</span><span class="n">math</span><span class="p">.</span><span class="n">log10</span><span class="p">(</span><span class="n">START_FREQ</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="n">FREQ_STEPS</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span><span class="o">+</span><span class="n">math</span><span class="p">.</span><span class="n">log10</span><span class="p">(</span><span class="n">START_FREQ</span><span class="p">))</span>
    
    <span class="c1"># Set horizontal scale
</span>    <span class="k">if</span> <span class="n">horizontalScale</span> <span class="o">!=</span> <span class="n">getHorizontalScale</span><span class="p">(</span><span class="n">output_Freq</span><span class="p">):</span>
        <span class="n">horizontalScale</span> <span class="o">=</span> <span class="n">getHorizontalScale</span><span class="p">(</span><span class="n">output_Freq</span><span class="p">)</span>
        <span class="n">scope</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="s">':TIMebase:SCALe '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">horizontalScale</span><span class="p">))</span>
    <span class="c1"># Set frequency
</span>    <span class="n">fgen</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="s">':SOURce1:FREQuency '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">output_Freq</span><span class="p">))</span>
    <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="c1"># Reading and calculating data
</span>    <span class="n">ch1_Frequency</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">scope</span><span class="p">.</span><span class="n">query</span><span class="p">(</span><span class="s">':MEASure:STATistic:ITEM? AVERages,FREQuency,CHANnel1'</span><span class="p">))</span>
    <span class="n">ch1_Voltage</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">scope</span><span class="p">.</span><span class="n">query</span><span class="p">(</span><span class="s">':MEASure:STATistic:ITEM? AVERages,VPP,CHANnel1'</span><span class="p">))</span>
    <span class="n">ch2_Voltage</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">scope</span><span class="p">.</span><span class="n">query</span><span class="p">(</span><span class="s">':MEASure:STATistic:ITEM? AVERages,VPP,CHANnel2'</span><span class="p">))</span>
    <span class="n">ch_Phase</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">scope</span><span class="p">.</span><span class="n">query</span><span class="p">(</span><span class="s">':MEASure:STATistic:ITEM? AVERages,RPHase'</span><span class="p">))</span><span class="o">*-</span><span class="mi">1</span>
    <span class="n">calc_dB</span> <span class="o">=</span> <span class="mi">20</span><span class="o">*</span><span class="n">math</span><span class="p">.</span><span class="n">log10</span><span class="p">(</span><span class="n">ch2_Voltage</span><span class="o">/</span><span class="n">ch1_Voltage</span><span class="p">)</span>
    <span class="n">dat_Freq</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">ch1_Frequency</span><span class="p">)</span>
    <span class="n">dat_dB</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">calc_dB</span><span class="p">)</span>
    <span class="n">dat_Phase</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">ch_Phase</span><span class="p">)</span>
    <span class="c1"># Set horizontal scale
</span>    <span class="k">if</span> <span class="n">verticalScale2</span> <span class="o">!=</span> <span class="n">getVerticalScale</span><span class="p">(</span><span class="n">ch2_Voltage</span><span class="p">):</span>
        <span class="n">verticalScale2</span> <span class="o">=</span> <span class="n">getVerticalScale</span><span class="p">(</span><span class="n">ch2_Voltage</span><span class="p">)</span>
        <span class="n">scope</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="s">':CHANnel2:SCALe '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">verticalScale2</span><span class="p">))</span>

<span class="c1"># Close instruments
</span><span class="n">fgen</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="s">':OUTPut1:STATe OFF'</span><span class="p">)</span> <span class="c1"># Turn off the fgen output
</span><span class="n">scope</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">fgen</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">rm</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></div>


    </div><a class="u-url" href="/unideb.playgnd/jekyll/update/2024/02/08/welcome-to-jekyll.html" hidden></a>
</article>

<script>
    MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']]
        }
    };
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="/unideb.playgnd/scripts/copyCode.js"></script>


      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/unideb.playgnd/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">UnidebPlayGnd</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">UnidebPlayGnd</li><li><a class="u-email" href="mailto:samplemail@samplemail.com">samplemail@samplemail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/dorabiro"><svg class="svg-icon"><use xlink:href="/unideb.playgnd/assets/minima-social-icons.svg#github"></use></svg> <span class="username">dorabiro</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Debreceni Egyetem</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
